<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lumicare Prize Giveaway</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0A4D68;
            --primary-light: #088395;
            --accent: #05BFDB;
            --accent-glow: #00FFE7;
            --surface: #F8FCFD;
            --surface-dark: #E8F4F6;
            --text-dark: #0A2E3C;
            --text-muted: #5A7A85;
            --white: #FFFFFF;
            --gradient-primary: linear-gradient(135deg, #0A4D68 0%, #088395 50%, #05BFDB 100%);
            --gradient-glow: linear-gradient(135deg, #05BFDB 0%, #00FFE7 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--surface);
            min-height: 100vh;
            overflow: hidden;
            position: relative;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .bg-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            animation: float 20s ease-in-out infinite;
        }

        .bg-orb-1 {
            width: 600px;
            height: 600px;
            background: var(--primary);
            top: -200px;
            right: -100px;
            animation-delay: 0s;
        }

        .bg-orb-2 {
            width: 500px;
            height: 500px;
            background: var(--accent);
            bottom: -150px;
            left: -100px;
            animation-delay: -7s;
        }

        .bg-orb-3 {
            width: 400px;
            height: 400px;
            background: var(--primary-light);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation-delay: -14s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.05); }
            50% { transform: translate(-20px, 20px) scale(0.95); }
            75% { transform: translate(20px, 30px) scale(1.02); }
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .logo {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 4rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -2px;
            margin-bottom: 8px;
        }

        .tagline {
            font-size: 1.2rem;
            color: var(--text-muted);
            font-weight: 400;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* ==================== */
        /* SCREEN 1: START SCREEN */
        /* ==================== */
        .screen {
            display: none;
            width: 100%;
            max-width: 700px;
            text-align: center;
        }

        .screen.active {
            display: block;
        }

        .start-card {
            background: var(--white);
            border-radius: 40px;
            padding: 60px 50px;
            box-shadow: 
                0 4px 6px rgba(10, 77, 104, 0.05),
                0 20px 50px rgba(10, 77, 104, 0.1),
                0 0 0 1px rgba(5, 191, 219, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .start-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-glow);
        }

        .start-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 15px;
        }

        .start-subtitle {
            font-size: 1.3rem;
            color: var(--text-muted);
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .lucky-btn {
            padding: 25px 60px;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
            background: var(--gradient-primary);
            border: none;
            border-radius: 60px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 15px 40px rgba(5, 191, 219, 0.4);
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: pulseBtn 2s ease-in-out infinite;
        }

        @keyframes pulseBtn {
            0%, 100% { transform: scale(1); box-shadow: 0 15px 40px rgba(5, 191, 219, 0.4); }
            50% { transform: scale(1.05); box-shadow: 0 20px 50px rgba(5, 191, 219, 0.6); }
        }

        .lucky-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 20px 50px rgba(5, 191, 219, 0.6);
            animation: none;
        }

        .lucky-btn:active {
            transform: scale(1.02);
        }

        /* ==================== */
        /* SCREEN 2: QR CODE SCREEN */
        /* ==================== */
        .qr-card {
            background: var(--white);
            border-radius: 40px;
            padding: 50px;
            box-shadow: 
                0 4px 6px rgba(10, 77, 104, 0.05),
                0 20px 50px rgba(10, 77, 104, 0.1),
                0 0 0 1px rgba(5, 191, 219, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: cardAppear 0.5s ease;
        }

        @keyframes cardAppear {
            0% { opacity: 0; transform: scale(0.9) translateY(20px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        .qr-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-glow);
        }

        .qr-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .qr-subtitle {
            font-size: 1.2rem;
            color: var(--text-muted);
            margin-bottom: 35px;
        }

        /* QR Code Container */
        .qr-container {
            position: relative;
            display: inline-block;
            padding: 30px;
            background: var(--surface);
            border-radius: 24px;
            margin-bottom: 30px;
        }

        .qr-container::before {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 28px;
            background: var(--gradient-glow);
            z-index: -1;
            opacity: 0.6;
            animation: glowPulse 2s ease-in-out infinite;
        }

        @keyframes glowPulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 0.8; }
        }

        .qr-image {
            display: block;
            width: 300px;
            height: 300px;
            border-radius: 12px;
        }

        .qr-image.hidden {
            display: none;
        }

        /* Scan Indicator */
        .scan-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            color: var(--primary-light);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .scan-pulse {
            width: 14px;
            height: 14px;
            background: var(--accent);
            border-radius: 50%;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.5; }
        }

        .back-btn {
            margin-top: 30px;
            padding: 12px 30px;
            font-family: 'Outfit', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-muted);
            background: transparent;
            border: 2px solid var(--surface-dark);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            border-color: var(--accent);
            color: var(--primary);
        }

        /* ==================== */
        /* SCREEN 3: WINNER SCREEN */
        /* ==================== */
        .winner-card {
            background: var(--white);
            border-radius: 40px;
            padding: 60px 80px;
            box-shadow: 
                0 4px 6px rgba(10, 77, 104, 0.05),
                0 30px 60px rgba(10, 77, 104, 0.15),
                0 0 0 1px rgba(5, 191, 219, 0.1);
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: winnerPop 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes winnerPop {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }

        .winner-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: var(--gradient-glow);
        }

        .prize-icon {
            width: 140px;
            height: 140px;
            margin: 0 auto 30px;
            background: var(--gradient-glow);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 70px;
            animation: iconBounce 0.8s ease 0.3s;
        }

        @keyframes iconBounce {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.2) rotate(-10deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
        }

        .congrats-text {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 4px;
        }

        .prize-name {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 3rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .prize-description {
            font-size: 1.3rem;
            color: var(--text-muted);
            margin-bottom: 40px;
        }

        .next-btn {
            padding: 22px 55px;
            font-family: 'Outfit', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--white);
            background: var(--gradient-primary);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(5, 191, 219, 0.3);
        }

        .next-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(5, 191, 219, 0.4);
        }

        /* Confetti */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1001;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            opacity: 0;
        }

        @keyframes confettiFall {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(720deg);
            }
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            z-index: 1;
        }

        .footer span {
            color: var(--primary-light);
            font-weight: 600;
        }

        /* Hidden input for scanner */
        .scanner-input {
            position: absolute;
            left: -9999px;
            opacity: 0;
        }

        /* Test Mode Panel */
        .test-panel {
            position: fixed;
            bottom: 70px;
            right: 20px;
            background: var(--white);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(10, 77, 104, 0.15);
            z-index: 100;
            display: none;
        }

        .test-panel.active {
            display: block;
        }

        .test-panel h4 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-dark);
            margin-bottom: 12px;
            font-size: 0.9rem;
        }

        .test-btn {
            display: block;
            width: 100%;
            padding: 10px 15px;
            margin-bottom: 8px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.85rem;
            color: var(--white);
            background: var(--primary);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .test-btn:hover {
            background: var(--primary-light);
        }

        .test-btn:last-child {
            margin-bottom: 0;
        }

        .test-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px 20px;
            font-family: 'Outfit', sans-serif;
            font-size: 0.8rem;
            color: var(--text-muted);
            background: var(--white);
            border: 1px solid var(--surface-dark);
            border-radius: 20px;
            cursor: pointer;
            z-index: 100;
            transition: all 0.2s ease;
        }

        .test-toggle:hover {
            border-color: var(--accent);
            color: var(--primary);
        }

        /* Current Prize Debug */
        .current-prize-debug {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--surface-dark);
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .current-prize-debug strong {
            color: var(--primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .logo { font-size: 2.8rem; }
            .start-card, .qr-card, .winner-card { padding: 40px 30px; }
            .qr-image { width: 250px; height: 250px; }
            .prize-name { font-size: 2.2rem; }
            .lucky-btn { padding: 20px 40px; font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="bg-orb bg-orb-1"></div>
        <div class="bg-orb bg-orb-2"></div>
        <div class="bg-orb bg-orb-3"></div>
    </div>

    <!-- Hidden input to capture USB scanner input -->
    <input type="text" class="scanner-input" id="scannerInput" autocomplete="off">

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Main Container -->
    <div class="container">
        <header class="header">
            <h1 class="logo">Lumicare</h1>
            <p class="tagline">Technology that lights a new tomorrow</p>
        </header>

        <!-- SCREEN 1: Start Screen -->
        <div class="screen active" id="startScreen">
            <div class="start-card">
                <h2 class="start-title">üéÅ Win a Prize!</h2>
                <p class="start-subtitle">Press the button below to reveal your prize.<br>Then scan the QR code to claim it!</p>
                <button class="lucky-btn" onclick="showQRScreen()">Am I Lucky?</button>
            </div>
        </div>

        <!-- SCREEN 2: QR Code Screen -->
        <div class="screen" id="qrScreen">
            <div class="qr-card">
                <h2 class="qr-title">üéØ Scan Your Prize!</h2>
                <p class="qr-subtitle">Use the scanner to reveal what you've won</p>
                
                <div class="qr-container">
                    <!-- Pre-embedded QR codes - These encode the prize code strings -->
                    <!-- LUMICARE_PEN -->
                    <img id="qr-pen" class="qr-image hidden" 
                         src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASIAAAEiCAIAAADS3EjhAAAFHElEQVR4nO3dMXLUQBBAUUw5427cgxNxD+5GLNKNpgzDrx7J7+W7K8v7a4Ltar1d1/UFKH2dvgB4PplBTmaQkxnkZAY5mUFOZpCTGeRkBjmZQU5mkJMZ5GQGOZlBTmaQkxnkZAY5mUFOZpB733nxt+8//td1HOL3r5///Nqdu7H+3O6dO74br5xmkJMZ5GQGOZlBTmaQkxnkZAY5mUFOZpDbmgJZm5o/WNuZTjhzzmNt/c5T/6PnfTfWnGaQkxnkZAY5mUFOZpCTGeRkBjmZQU5mkAunQNa6X9yfN2HQbSg5c8vI874bTjPIyQxyMoOczCAnM8jJDHIyg5zMICczyI1NgfCqm06Y2kHCK6cZ5GQGOZlBTmaQkxnkZAY5mUFOZpCTGeRMgfw33bxF91SXM/emPI/TDHIyg5zMICczyMkMcjKDnMwgJzPIyQxyY1Mg5g9edTs5znzmy5mf23GaQU5mkJMZ5GQGOZlBTmaQkxnkZAY5mUEunALxtJGPm3puy87n7sxqfLbvhtMMcjKDnMwgJzPIyQxyMoOczCAnM8jJDHJv13VNXwNb8xbdto9uCuSzcZpBTmaQkxnkZAY5mUFOZpCTGeRkBjmZQW5sCsSeiVdnznnsmPrcHd1ci9MMcjKDnMwgJzPIyQxyMoOczCAnM8jJDHJbUyCf7bf8tam7cebf220Z6WZiOk4zyMkMcjKDnMwgJzPIyQxyMoOczCAnM8i9d2/d/eK+ngOY2m/RmbqT3UaWnXfuZkS6a3aaQU5mkJMZ5GQGOZlBTmaQkxnkZAY5mUEunAJ53r6Hqb+om07YceZTe7odJDucZpCTGeRkBjmZQU5mkJMZ5GQGOZlBTmaQ25oC6eYedj53bWcOYGqDxZmTDWt3nJixCwRuTGaQkxnkZAY5mUFOZpCTGeRkBjmZQe7tuq7orc+cAlk7cwfJ2plTIGtTT6JZswsEbkxmkJMZ5GQGOZlBTmaQkxnkZAY5mUFuaxfI1C/uZz5PZEf3zjufO7Vzpbsqu0DgsWQGOZlBTmaQkxnkZAY5mUFOZpCTGeTCXSBrU3MPU3Mea91VTe1N+WxPwFlzmkFOZpCTGeRkBjmZQU5mkJMZ5GQGOZlBbmsKZGpmYm1q/mDtzKmIM/+DnakZEacZ5GQGOZlBTmaQkxnkZAY5mUFOZpCTGeS2nghz5t6Fte6az7wbd9y6ccdtH2tOM8jJDHIyg5zMICczyMkMcjKDnMwgJzPIbU2BPG+TxM6EwZl3Y2oXyB0nObprdppBTmaQkxnkZAY5mUFOZpCTGeRkBjmZQW5rCmTtjr/0TznzXu2446aQ7pqdZpCTGeRkBjmZQU5mkJMZ5GQGOZlBTmaQC6dA1rppjDOf+bLz907dq/XnnjlPc+YOEqcZ5GQGOZlBTmaQkxnkZAY5mUFOZpCTGeTGpkCe58z5g6mret52kx1OM8jJDHIyg5zMICczyMkMcjKDnMwgJzPImQL5C1P7PHY2duzoNoXsvPOZd2PNaQY5mUFOZpCTGeRkBjmZQU5mkJMZ5GQGubEpkDvuiujmD+54N6acuXNlzWkGOZlBTmaQkxnkZAY5mUFOZpCTGeRkBrm367r++cXd3oUp3QzBmTsqztwj0r1z99o1pxnkZAY5mUFOZpCTGeRkBjmZQU5mkJMZ5LamQICPcJpBTmaQkxnkZAY5mUFOZpCTGeRkBjmZQU5mkJMZ5GQGOZlBTmaQkxnkZAY5mUFOZpCTGeT+ACIBg8gplLJ6AAAAAElFTkSuQmCC"
                         alt="Lumicare Pen QR Code"
                         data-prize="LUMICARE_PEN">
                    
                    <!-- LUMICARE_BOTTLE_OPENER -->
                    <img id="qr-bottle-opener" class="qr-image hidden" 
                         src="data:image/png;base64,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"
                         alt="Lumicare Bottle Opener QR Code"
                         data-prize="LUMICARE_BOTTLE_OPENER">
                    
                    <!-- LUMICARE_DRINK_BOTTLE -->
                    <img id="qr-drink-bottle" class="qr-image hidden" 
                         src="data:image/png;base64,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"
                         alt="Lumicare Drink Bottle QR Code"
                         data-prize="LUMICARE_DRINK_BOTTLE">
                </div>

                <div class="scan-indicator">
                    <div class="scan-pulse"></div>
                    <span>Waiting for scan...</span>
                </div>

                <button class="back-btn" onclick="goToStart()">‚Üê Start Over</button>
            </div>
        </div>

        <!-- SCREEN 3: Winner Screen -->
        <div class="screen" id="winnerScreen">
            <div class="winner-card">
                <div class="prize-icon" id="prizeIcon">üéÅ</div>
                <p class="congrats-text">üéâ Congratulations! üéâ</p>
                <h2 class="prize-name" id="prizeName">You've Won!</h2>
                <p class="prize-description" id="prizeDescription">Collect your prize at the booth!</p>
                <button class="next-btn" onclick="goToStart()">Next Customer</button>
            </div>
        </div>
    </div>

    <!-- Test Mode Panel -->
    <div class="test-panel" id="testPanel">
        <h4>üß™ Test Mode - Simulate Scan</h4>
        <button class="test-btn" onclick="simulateScan('LUMICARE_PEN')">Scan: Pen</button>
        <button class="test-btn" onclick="simulateScan('LUMICARE_BOTTLE_OPENER')">Scan: Bottle Opener</button>
        <button class="test-btn" onclick="simulateScan('LUMICARE_DRINK_BOTTLE')">Scan: Drink Bottle</button>
        <div class="current-prize-debug">
            Current QR: <strong id="currentPrizeDebug">None</strong>
        </div>
    </div>

    <button class="test-toggle" onclick="toggleTestPanel()">üß™ Test Mode</button>

    <!-- Footer -->
    <div class="footer">
        Powered by <span>Lumicare</span> Innovation
    </div>

    <script>
        // Prize definitions with their QR code values
        // The QR codes encode these exact strings - the USB scanner will "type" them
        const prizes = {
            'LUMICARE_PEN': {
                name: 'Lumicare Pen',
                icon: 'üñäÔ∏è',
                description: 'A premium Lumicare branded pen!',
                elementId: 'qr-pen'
            },
            'LUMICARE_BOTTLE_OPENER': {
                name: 'Lumicare Bottle Opener',
                icon: 'üçæ',
                description: 'A stylish Lumicare bottle opener!',
                elementId: 'qr-bottle-opener'
            },
            'LUMICARE_DRINK_BOTTLE': {
                name: 'Lumicare Drink Bottle',
                icon: 'üß¥',
                description: 'An eco-friendly Lumicare drink bottle!',
                elementId: 'qr-drink-bottle'
            }
        };

        const prizeKeys = Object.keys(prizes);
        let currentPrizeKey = null;
        let scanBuffer = '';
        let scanTimeout = null;

        // Screen management
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // Go to start screen
        function goToStart() {
            showScreen('startScreen');
            hideAllQRCodes();
            currentPrizeKey = null;
            updateDebug();
            
            // Clear confetti
            document.getElementById('confettiContainer').innerHTML = '';
        }

        // Hide all QR codes
        function hideAllQRCodes() {
            document.querySelectorAll('.qr-image').forEach(img => {
                img.classList.add('hidden');
            });
        }

        // Show QR screen with random prize
        function showQRScreen() {
            // Select random prize
            const randomIndex = Math.floor(Math.random() * prizeKeys.length);
            currentPrizeKey = prizeKeys[randomIndex];
            
            // Show the corresponding QR code
            hideAllQRCodes();
            const prize = prizes[currentPrizeKey];
            document.getElementById(prize.elementId).classList.remove('hidden');
            
            // Show QR screen
            showScreen('qrScreen');
            
            // Focus on hidden input to capture scanner input
            document.getElementById('scannerInput').focus();
            
            // Update debug info
            updateDebug();
            
            console.log(`Selected prize: ${prize.name} (Code: ${currentPrizeKey})`);
        }

        // Show winner screen
        function showWinnerScreen(prizeKey) {
            const prize = prizes[prizeKey];
            if (!prize) return;

            document.getElementById('prizeIcon').textContent = prize.icon;
            document.getElementById('prizeName').textContent = `You've Won a ${prize.name}!`;
            document.getElementById('prizeDescription').textContent = prize.description;

            showScreen('winnerScreen');
            createConfetti();
        }

        // Create confetti effect
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';

            const colors = ['#0A4D68', '#088395', '#05BFDB', '#00FFE7', '#FFD700', '#FF6B6B', '#FF69B4', '#00FF00'];
            const shapes = ['square', 'circle'];

            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                
                const color = colors[Math.floor(Math.random() * colors.length)];
                const shape = shapes[Math.floor(Math.random() * shapes.length)];
                const left = Math.random() * 100;
                const delay = Math.random() * 0.8;
                const duration = 2.5 + Math.random() * 2;
                const size = 8 + Math.random() * 12;

                confetti.style.cssText = `
                    left: ${left}%;
                    top: -20px;
                    width: ${size}px;
                    height: ${size}px;
                    background: ${color};
                    border-radius: ${shape === 'circle' ? '50%' : '2px'};
                    animation: confettiFall ${duration}s ease-out ${delay}s forwards;
                `;

                container.appendChild(confetti);
            }
        }

        // Handle scanner input (USB scanners act like keyboards)
        function handleScannerInput(e) {
            // Clear timeout if exists
            if (scanTimeout) {
                clearTimeout(scanTimeout);
            }

            // Add character to buffer
            if (e.key === 'Enter') {
                // Scanner finished - process the buffer
                processScan(scanBuffer);
                scanBuffer = '';
            } else if (e.key.length === 1) {
                scanBuffer += e.key;
            }

            // Reset buffer after 100ms of no input (scanner types fast)
            scanTimeout = setTimeout(() => {
                if (scanBuffer.length > 0) {
                    processScan(scanBuffer);
                    scanBuffer = '';
                }
            }, 100);
        }

        // Process scanned data
        function processScan(scannedData) {
            console.log('Scanned:', scannedData);
            
            // Check if scanned data matches a valid prize
            if (prizes[scannedData]) {
                showWinnerScreen(scannedData);
            } else {
                console.log('Invalid scan data:', scannedData);
            }
        }

        // Simulate a scan (for testing without scanner)
        function simulateScan(prizeCode) {
            if (document.getElementById('qrScreen').classList.contains('active')) {
                processScan(prizeCode);
            } else {
                alert('Please click "Am I Lucky?" first to show a QR code');
            }
        }

        // Toggle test panel
        function toggleTestPanel() {
            document.getElementById('testPanel').classList.toggle('active');
        }

        // Update debug info
        function updateDebug() {
            const debugEl = document.getElementById('currentPrizeDebug');
            if (currentPrizeKey) {
                debugEl.textContent = currentPrizeKey;
            } else {
                debugEl.textContent = 'None';
            }
        }

        // Keep focus on scanner input when on QR screen
        document.addEventListener('click', function(e) {
            // Don't steal focus if clicking on test buttons
            if (e.target.classList.contains('test-btn') || 
                e.target.classList.contains('test-toggle') ||
                e.target.classList.contains('back-btn')) {
                return;
            }
            
            if (document.getElementById('qrScreen').classList.contains('active')) {
                document.getElementById('scannerInput').focus();
            }
        });

        // Listen for keyboard input (scanner input)
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('qrScreen').classList.contains('active')) {
                handleScannerInput(e);
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            goToStart();
        });
    </script>
</body>
</html>